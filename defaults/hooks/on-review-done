#!/bin/bash
#
# on-review-done - Triggered when review passes
#
# Spawns a QA agent for the ticket.
#
# Environment:
#   WIGGUM_TICKET_ID    - The ticket ID
#   WIGGUM_TICKET_PATH  - Full path to ticket file
#   WIGGUM_PREV_STATE   - Previous state (review)
#   WIGGUM_NEW_STATE    - New state (qa)
#   WIGGUM_AGENT_ID     - Agent that triggered transition
#   WIGGUM_SESSION      - tmux session name
#

TICKET_ID="${1:-$WIGGUM_TICKET_ID}"

echo "[hook] Review passed for $TICKET_ID, spawning QA"

# Spawn a QA agent
wiggum spawn qa "$TICKET_ID"
