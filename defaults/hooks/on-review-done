#!/bin/bash
#
# on-review-done - Triggered when review passes
#
# Spawns a QA agent for the ticket.
#
# Environment:
#   RALPHS_TICKET_ID    - The ticket ID
#   RALPHS_TICKET_PATH  - Full path to ticket file
#   RALPHS_PREV_STATE   - Previous state (review)
#   RALPHS_NEW_STATE    - New state (qa)
#   RALPHS_PANE         - Pane that triggered transition
#   RALPHS_SESSION      - tmux session name
#

TICKET_ID="${1:-$RALPHS_TICKET_ID}"

echo "[hook] Review passed for $TICKET_ID, spawning QA"

# Spawn a QA agent
ralphs spawn qa "$TICKET_ID"
